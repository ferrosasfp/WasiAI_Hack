// Prisma schema for marketplace AI keys

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model ModelKey {
  id        Int      @id @default(autoincrement())
  modelId   Int      @unique
  slug      String?  @db.VarChar(120)
  keyB64    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([slug])
}

model ModelIndex {
  id         Int      @id @default(autoincrement())
  chain      String   @db.VarChar(16)   // 'sui' | 'evm'
  network    String   @db.VarChar(32)   // 'testnet' | 'base' | 'avax'
  modelId    String?  @db.VarChar(128)  // u64 en Sui o uint256/otro id si aplica
  slug       String?  @db.VarChar(120)
  name       String?  @db.VarChar(200)
  uri        String   @db.VarChar(255)
  version    Int?
  owner      String?  @db.VarChar(128)
  txHash     String?  @db.VarChar(130)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([chain, network])
  @@index([slug])
}
